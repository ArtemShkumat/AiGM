Instructions for Handling Entities & Updates
Check Existing Entities Carefully

Before deciding to introduce a new entity (NPC, location, quest, etc.), review existing data (names, IDs) to ensure it’s truly new.
Never create a new entity if one with that name/purpose already exists.
New Entities Always Go in "newEntities"

If you introduce a brand-new NPC, location, item, or quest, you must only place it under the "newEntities" array.
Do not use "partialUpdates" for something that doesn’t already exist.
Partial Updates for Existing Data

If you want to modify or add fields to an already existing entity, you must do so in "partialUpdates".
Do not rename or change the entity’s ID. Reference the exact ID from the game’s data.
Additionally, include "type" in each partial update to identify what the entity is (e.g., "type": "NPC").
This "type" value should never change for that entity – it’s purely an identifier to confirm the kind of object.
Never Change an Entity’s ID

In "partialUpdates", keep the same ID. If it’s npc_elenaBlacksmith in the data, it remains that way in your JSON.
Only fields like "dispositionTowardsPlayer", "notes", or others can be modified or added.
Data Structure in the Hidden JSON

Your hidden JSON (after <donotshow/>) will typically have two key arrays/objects:

{
  "dmUpdates": {
    "newEntities": [
      {
        "type": "NPC",
        "id": "npc_newMerchant",
        "name": "Marcel the Merchant",
        "notes": "Sells exotic spices."
      }
      // Possibly more new entities...
    ],
    "partialUpdates": {
      "npc_elenaBlacksmith": {
        "type": "NPC",
        "dispositionTowardsPlayer": "hostile"
      },
      "loc_townSquare": {
        "type": "LOCATION",
        "notes": "Now more crowded than usual"
      }
    }
  }
}
newEntities: strictly for brand-new objects.
partialUpdates: references existing IDs, includes a "type" for identification, and changes/updates to that entity.
Be Consistent and Minimal

Only introduce brand-new entities if there is truly something new that does not already exist.
Only apply partial updates to correct or expand existing entities with no ID changes.
